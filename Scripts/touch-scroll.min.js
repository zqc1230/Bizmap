(function(b){var c={y:0,scrollHeight:0,elastic:!navigator.userAgent.match(/android/i),momentum:true,elasticDamp:0.6,elasticTime:50,reboundTime:400,momentumDamp:0.9,momentumTime:300,iPadMomentumDamp:0.95,iPadMomentumTime:1200,touchTags:["select","input","textarea"]};var a={init:function(d){return this.each(function(){var z=b.extend(c,d);if(!!this._init){return this.update()}this._init=true;var p=b(this),C=-z.y,s=0,t=0,l=0,w=0,A=0,G=0,u=false,f=false,n=false,J,x=!!navigator.platform.match(/ipad/i),k=true;var r=this.update=function(){w=p.height();if(z.scrollHeight){G=z.scrollHeight}else{if(p.prop){G=p.prop("scrollHeight")}else{G=p.attr("scrollHeight")}}if(G<w){G=w}A=w-G;clearTimeout(J);y(false)};r();p.css({"-webkit-transition-timing-function":"cubic-bezier(0,0,0.2,1)","-webkit-transition-duration":"0"});window.addEventListener("onorientationchange" in window?"orientationchange":"resize",r,false);p.bind("touchstart.touchScroll",e);p.bind("touchmove.touchScroll",F);p.bind("touchend.touchScroll touchcancel.touchScroll",i);p.bind("webkitTransitionEnd.touchScroll",q);var h=this.setPosition=function(o){C=o;p.css("-webkit-transform",j(C))};function j(o){return"translateY("+o+"px)"}function v(o){o=o||"0";p.css("-webkit-transition-duration",o+"ms")}function I(){if(k){var K=window.getComputedStyle(p[0]).webkitTransform;if(!!K&&K!=="none"){var o=new WebKitCSSMatrix(K);return o.f}}return C}this.getPosition=function(){return I()};function B(){if(C>0){g(0,z.reboundTime)}else{if(C<A){g(A,z.reboundTime)}}}function q(){if(f){f=false;B()}clearTimeout(J)}function y(K){if(!k||f){return}var o=l;l=I();if(l>0){if(z.elastic){f=true;C=0;E(l-o,z.elasticDamp,1,w,z.elasticTime)}else{v(0);h(0)}}else{if(l<A){if(z.elastic){f=true;C=A;E(l-o,z.elasticDamp,1,w,z.elasticTime)}else{v(0);h(A)}}else{if(K){J=setTimeout(y,20,true)}}}}function g(o,K){if(o===C){return}n=true;v(K);h(o)}function E(Q,L,K,N,M){var O=Math.abs(Q),o=0;while(O>0.1){O*=L;o+=O}if(o>N){o=N}if(o>K){if(Q<0){o=-o}o+=C;if(w>0){if(o>w*2){var P=o;o=w*2}else{if(o<A-w*2){o=A-w*2}}}g(Math.round(o),M)}y(true)}function D(o){if(o.originalEvent){if(o.originalEvent.touches&&o.originalEvent.touches.length){return o.originalEvent.touches}else{if(o.originalEvent.changedTouches&&o.originalEvent.changedTouches.length){return o.originalEvent.changedTouches}}}return o.touches}function m(o,M,L){var K=document.createEvent("MouseEvent");K.initMouseEvent(o,true,true,M.view,1,M.screenX,M.screenY,M.clientX,M.clientY,false,false,false,false,0,null);L.dispatchEvent(K)}function H(o){while(o.nodeType!==1){o=o.parentNode}return o}function e(o){if(b.inArray(o.target.tagName.toLowerCase(),z.touchTags)!==-1){return}o.preventDefault();o.stopPropagation();var L=D(o)[0];m("mousedown",L,H(L.target));u=true;n=false;t=0;clearTimeout(J);v(0);if(z.momentum){var K=I();if(K!==C){h(K);n=true}}s=L.pageY-C}function F(K){if(!u){return}if(!(p[0].id=="bizIn"&&showswitch)){var o=D(K)[0].pageY-s;if(o>0){if(z.elastic){o/=2}else{o=0}}else{if(o<A){if(z.elastic){o=(o+A)/2}else{o=A}}}t=o-C;n=true;h(o)}}function i(K){if(!u){return}u=false;if(n){if(C>0||C<A){B()}else{if(z.momentum){E(t,x?z.iPadMomentumDamp:z.momentumDamp,40,2000,x?z.iPadMomentumTime:z.momentumTime)}}}else{var L=D(K)[0],o=H(L.target);m("mouseup",L,o);m("click",L,o)}}})},update:function(){try{return this.each(function(){this.update()})}catch(d){}},getPosition:function(){var d=[];this.each(function(){d.push(-this.getPosition())});return d},setPosition:function(f){try{return this.each(function(){this.setPosition(-f)})}catch(d){}}};b.fn.touchScroll=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{b.error("Method "+d+" does not exist on jQuery.touchScroll")}}}})(jQuery);
